## Digified Zendesk Theme

The repository contains the working copy of the Digified Zendesk Guide theme. Edit the files under `templates/`, `assets/`, etc., then rebuild the distributable archive before uploading to Zendesk.

### Packaging

Zendesk’s importer expects forward-slash paths inside the zip. Windows `Compress-Archive` writes backslash-separated entries, which causes missing-template errors (e.g., `templates/home_page.hbs`). Use the helper script instead:

```powershell
powershell -ExecutionPolicy Bypass -File .\package-theme.ps1
```

The script runs `tar -a -c -f digified-theme.zip assets settings templates translations script.js style.css manifest.json settings_schema.json`, ensuring the resulting `digified-theme.zip` is ready for import with POSIX-style paths. Use the `-ExecutionPolicy Bypass` flag if your PowerShell policy blocks local scripts.

### Training booking setup

The training booking page relies on a Google Apps Script web app that returns available sessions and creates Zendesk tickets after a booking.

Calendar_API deployment:
- Deployment ID: `AKfycbxKZUHO8KiN6-oawtgTnXJy9yf2OPUT1hpnRgcrnygAB8SzMv3J5EylrhC4_Dgv0_dX`
- Web App URL: `https://script.google.com/macros/s/AKfycbxKZUHO8KiN6-oawtgTnXJy9yf2OPUT1hpnRgcrnygAB8SzMv3J5EylrhC4_Dgv0_dX/exec`

Apps Script properties (Project Settings > Script properties):
- `ZD_SUBDOMAIN`: Zendesk subdomain used for ticket creation.
- `ZD_EMAIL`: Zendesk agent email used to create tickets.
- `ZD_TOKEN`: Zendesk API token for ticket creation.
- `TRAINING_API_KEY`: API key generated by the Apps Script `?action=init` endpoint.

Zendesk theme settings (Guide Admin > Customize > Theme settings):
- Set `training_api_base_url` to the Apps Script web app URL.
- Set `training_api_key` to the same API key generated by the Apps Script.
- Optional: set `training_booking_internal_tag` if internal users need a specific tag to see booking links.

Note: The Apps Script handles Zendesk ticket creation internally, so the client does not call the Zendesk API directly.

Custom page setup:
- Create a Zendesk Guide custom page with slug `training_booking`.
- Assign the `training_booking` custom template (backed by `templates/custom_pages/training_booking.hbs`).
- The resulting URL should be `/hc/en-us/p/training_booking`.

Validation checklist:
- Visit `https://cxe-internal.zendesk.com/hc/en-us/p/training_booking` and confirm the template loads.
- Click the “Book Training” nav link and confirm it routes to the same page.
- Use the default next-30-days range to load sessions and submit a booking.
